import{a as g,l as x,j as P,F as _,g as e,at as A,h as N,au as $,aw as w}from"./index.cde5efb9.js";import{N as C,P as D}from"./PasswordOutlinedInput.6aa510db.js";import{u as s}from"./useInput.a71396c8.js";import{r as V}from"./request.527db9f2.js";import{u as b}from"./useMutation.esm.5991efdc.js";import"./FormControl.9937e9c9.js";import"./OutlinedInput.9de19efa.js";import"./GlobalStyles.99815698.js";import"./InputLabel.d53938ec.js";import"./utils.esm.58b1171b.js";const F=t=>/^[0-9\b -]{0,13}$/.test(t),j=t=>/[a-z0-9]+@g.yju.ac.kr/.test(t);function y(t){const{std_id:o,std_name:m,password:l,ph_num:n,room_num:r,e_mail:u}=t;return V.post("/signup",{std_id:o,std_name:m,password:l,ph_num:n,room_num:r,e_mail:u})}function Z(){const[t,o]=g.exports.useState(!1),{mutate:m}=b(["signup"],y,{onSuccess:()=>{alert("\uC778\uC99D \uBA54\uC77C\uC744 \uBCF4\uB0C8\uC2B5\uB2C8\uB2E4."),f("/login")}}),l=s("","\uD559\uBC88"),n=s("","\uC774\uB984"),r=s("","\uC774\uBA54\uC77C"),u=s("","\uD578\uB4DC\uD3F0 \uBC88\uD638"),c=s("","\uBC29 \uBC88\uD638"),i=s("","\uD328\uC2A4\uC6CC\uB4DC"),p=s("","\uD328\uC2A4\uC6CC\uB4DC \uD655\uC778"),f=x(),B=async()=>{o(!0),w.signUp(l.value,i.value,[{Name:"name",Value:n.value},{Name:"email",Value:r.value},{Name:"phone_number",Value:"+82"+u.value.slice(1).replaceAll("-","")},{Name:"custom:room_num",Value:c.value}],null,(a,h)=>{o(!1),a?console.log(a):(alert("success"),m({std_id:l.value,std_name:n.value,password:i.value,ph_num:u.value,room_num:c.value,e_mail:r.value}))})},d=a=>a===i.value;g.exports.useLayoutEffect(()=>{u.value.length===10&&u.onChange(u.value.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3")),u.value.length===13&&u.onChange(u.value.replace(/-/g,"").replace(/(\d{3})(\d{4})(\d{4})/,"$1-$2-$3"))},[u.value]);const v=a=>/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/.test(a);return P(_,{children:[e(A.Title,{title:"\uD68C\uC6D0 \uAC00\uC785"}),e(C,{...l}),e(C,{...n}),e(C,{...r,validator:()=>j(r.value),hintMessage:"\uC774\uBA54\uC77C \uD615\uC2DD\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694 *@g.yju.ac.kr"}),e(C,{value:u.value,onChange:a=>{F(a.target.value)&&u.onChange(a)},label:u.label}),e(C,{...c}),e(D,{...i,validator:v}),e(D,{...p,validator:d}),e(N,{color:"primary",onClick:()=>{d(p.value)&&v(i.value)&&B()},variant:"contained",fullWidth:!0,children:"\uD68C\uC6D0\uAC00\uC785"}),e($,{visible:t})]})}export{Z as default};
