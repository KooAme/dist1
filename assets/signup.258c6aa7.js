import{a as f,l as _,j as N,F as V,g as a,at as $,h as w,au as b,aw as F}from"./index.4f6cb32c.js";import{N as n,P as h}from"./PasswordOutlinedInput.e315a130.js";import{u as t}from"./useInput.f8aa70dd.js";import{r as j}from"./request.707945aa.js";import{u as y}from"./useMutation.esm.e03828ae.js";import"./FormControl.1a91d2a8.js";import"./OutlinedInput.2be38b6e.js";import"./GlobalStyles.78d748c9.js";import"./InputLabel.bcb17386.js";import"./utils.esm.9c9e0e5a.js";function S(p){const{std_id:i,std_name:d,password:C,ph_num:m,room_num:s,e_mail:o}=p;return j.post("/signup",{std_id:i,std_name:d,password:C,ph_num:m,room_num:s,e_mail:o})}function q(){const[p,i]=f.exports.useState(!1),{mutate:d}=y(["signup"],S,{onSuccess:()=>{alert("\uC778\uC99D \uBA54\uC77C\uC744 \uBCF4\uB0C8\uC2B5\uB2C8\uB2E4."),x("/login")}}),C=u=>/^[0-9\b -]{0,13}$/.test(u),m=u=>/[a-z0-9]+@g.yju.ac.kr/.test(u),s=t("","\uD559\uBC88"),o=t("","\uC774\uB984"),r=t("","\uC774\uBA54\uC77C"),e=t("","\uD578\uB4DC\uD3F0 \uBC88\uD638"),v=t("","\uBC29 \uBC88\uD638"),l=t("","\uD328\uC2A4\uC6CC\uB4DC"),g=t("","\uD328\uC2A4\uC6CC\uB4DC \uD655\uC778"),x=_(),A=async()=>{i(!0),F.signUp(s.value,l.value,[{Name:"name",Value:o.value},{Name:"email",Value:r.value},{Name:"phone_number",Value:"+82"+e.value.slice(1).replaceAll("-","")},{Name:"custom:room_num",Value:v.value}],null,(u,c)=>{i(!1),u||d({std_id:s.value,std_name:o.value,password:l.value,ph_num:e.value,room_num:v.value,e_mail:r.value})})},D=u=>u===l.value,P=u=>/^[0-9]{7}/.test(u);f.exports.useLayoutEffect(()=>{e.value.length===10&&e.onChange(e.value.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3")),e.value.length===13&&e.onChange(e.value.replace(/-/g,"").replace(/(\d{3})(\d{4})(\d{4})/,"$1-$2-$3"))},[e.value]);const B=u=>/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/.test(u);return N(V,{children:[a($.Title,{title:"\uD68C\uC6D0 \uAC00\uC785"}),a(n,{...s}),a(n,{...o}),a(n,{...r,validator:()=>m(r.value),hintMessage:"\uC774\uBA54\uC77C \uD615\uC2DD\uC744 \uD655\uC778\uD574\uC8FC\uC138\uC694 *@g.yju.ac.kr"}),a(n,{value:e.value,onChange:u=>{C(u.target.value)&&e.onChange(u)},label:e.label}),a(n,{...v}),a(h,{...l,validator:B}),a(h,{...g,validator:D}),a(w,{color:"primary",onClick:()=>{D(g.value)&&B(l.value)&&m(r.value)&&C(e.value)&&P(s.value)?A():alert("\uC720\uD6A8\uD558\uC9C0 \uC54A\uC740 \uAC12\uC785\uB2C8\uB2E4.")},variant:"contained",fullWidth:!0,children:"\uD68C\uC6D0\uAC00\uC785"}),a(b,{visible:p})]})}export{q as default};
