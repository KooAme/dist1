import{a as C,l as P,j as _,F as N,g as a,at as V,h as $,au as w,aw as b}from"./index.4b9d08d7.js";import{N as l,P as E}from"./PasswordOutlinedInput.1a168cf4.js";import{u as t}from"./useInput.7f2aff69.js";import{r as D}from"./request.3f29df96.js";import{u as S}from"./useMutation.esm.3bc68b78.js";import"./FormControl.2871b7f9.js";import"./OutlinedInput.36d8867f.js";import"./GlobalStyles.48d223b5.js";import"./InputLabel.7f6210ac.js";import"./utils.esm.576e56a8.js";function U(d){const{std_id:i,std_name:v,password:m,ph_num:c,room_num:s,e_mail:o}=d;return D.post("/signup",{std_id:i,std_name:v,password:m,ph_num:c,room_num:s,e_mail:o})}function q(){const[d,i]=C.exports.useState(!1),{mutate:v}=S(["signup"],U,{onSuccess:()=>{alert("\u8A8D\u8A3C\u30E1\u30FC\u30EB\u3092\u9001\u4FE1\u3057\u307E\u3057\u305F\u3002"),x("/login")}}),m=u=>/^[0-9\b -]{0,13}$/.test(u),c=u=>/[a-z0-9]+@g.yju.ac.kr/.test(u),s=t("","\u5B66\u756A"),o=t("","\u540D\u524D"),r=t("","\u30E1\u30FC\u30EB"),e=t("","\u643A\u5E2F\u756A\u53F7"),g=t("","\u90E8\u5C4B\u306E\u756A\u53F7"),n=t("","\u30D1\u30B9\u30EF\u30FC\u30C9"),f=t("","\u30D1\u30B9\u30EF\u30FC\u30C9\u78BA\u8A8D"),x=P(),A=async()=>{i(!0),b.signUp(s.value,n.value,[{Name:"name",Value:o.value},{Name:"email",Value:r.value},{Name:"phone_number",Value:"+82"+e.value.slice(1).replaceAll("-","")},{Name:"custom:room_num",Value:g.value}],null,(u,p)=>{i(!1),u||v({std_id:s.value,std_name:o.value,password:n.value,ph_num:e.value,room_num:g.value,e_mail:r.value})})},F=u=>u===n.value,B=u=>/^[0-9]{7}/.test(u);C.exports.useLayoutEffect(()=>{e.value.length===10&&e.onChange(e.value.replace(/(\d{3})(\d{3})(\d{4})/,"$1-$2-$3")),e.value.length===13&&e.onChange(e.value.replace(/-/g,"").replace(/(\d{3})(\d{4})(\d{4})/,"$1-$2-$3"))},[e.value]);const h=u=>/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/.test(u);return _(N,{children:[a(V.Title,{title:"Sign Up"}),a(l,{...s}),a(l,{...o}),a(l,{...r,validator:()=>c(r.value),hintMessage:"\u30E1\u30FC\u30EB\u306E\u5F62\u5F0F\u3092\u78BA\u8A8D\u3057\u3066\u304F\u3060\u3055\u3044\u3002 *@g.yju.ac.kr"}),a(l,{value:e.value,onChange:u=>{m(u.target.value)&&e.onChange(u)},label:e.label}),a(l,{...g}),a(E,{...n,validator:h}),a(E,{...f,validator:F}),a($,{color:"primary",onClick:()=>{F(f.value)&&h(n.value)&&c(r.value)&&m(e.value)&&B(s.value)?A():alert("\u7121\u52B9\u306A\u5024\u3067\u3059\u3002")},variant:"contained",fullWidth:!0,children:"Sign Up"}),a(w,{visible:d})]})}export{q as default};
