import{a as s,l as A,j as l,g as e,G as o,I as p,B as j,h as d}from"./index.4b9d08d7.js";import{a as k}from"./request.3f29df96.js";import{u as b}from"./useQueryOption.0859a797.js";import{u as R,d as E}from"./ImageOutlined.f54ff1ba.js";import{u as f}from"./useInput.7f2aff69.js";import"./useModalContext.28eeed22.js";import{g as w}from"./board.b5ce875f.js";import{R as h}from"./index.02743629.js";import{u as O}from"./useMutation.esm.3bc68b78.js";import{F as g}from"./FormControl.2871b7f9.js";import{O as x}from"./OutlinedInput.36d8867f.js";import"./utils.esm.576e56a8.js";import"./GlobalStyles.48d223b5.js";function J(){const i=f(""),n=f(""),u=R(),a=s.exports.useRef(null),c=A(),[B,v]=s.exports.useState(""),{option:C,token:m}=b();s.exports.useEffect(()=>{k.get("https://api.ipify.org?format=json").then(t=>{const r=t.data.ip.split("."),F=[r[2],r[3]];v(F.join("."))}).catch(t=>{})},[]);const{mutate:I}=O(["createBulletin"],w,{...C,onSuccess:()=>{c("/board/annonymous")}}),y=()=>{c(-1)};return l(h,{children:[e(h.Title,{title:"\u63B2\u793A\u6587\u4F5C\u6210"}),l(o,{xs:12,item:!0,px:2,textAlign:"end",children:[e(p,{onClick:()=>{var t;a&&((t=a.current)==null||t.click())},color:"primary",sx:{border:1,borderRadius:1},children:e(E,{})}),e("input",{style:{display:"none"},ref:a,type:"file",accept:"image/*",onChange:u.onChange,multiple:!1}),u.previewImgArr.map((t,r)=>t&&e(p,{onClick:()=>u.removeImageItem(r),children:e("img",{src:t,width:40})},"image"+r))]}),e(o,{xs:12,item:!0,p:2,children:e(g,{fullWidth:!0,children:e(x,{placeholder:"\u30BF\u30A4\u30C8\u30EB\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044...",...i})})}),e(o,{xs:12,item:!0,p:2,children:e(g,{fullWidth:!0,children:e(x,{multiline:!0,rows:15,placeholder:"\u5185\u5BB9\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044...",...n})})}),e(o,{xs:12,item:!0,p:2,children:l(j,{display:"flex",justifyContent:"end",children:[e(d,{onClick:y,variant:"contained",color:"disable",children:"\u30AD\u30E3\u30F3\u30BB\u30EB"}),e(d,{variant:"contained",sx:{ml:2},onClick:()=>i.value&&n.value&&m&&I({title:i.value,content:n.value,images:u.value,ip:B,token:m}),children:"\u63D0\u51FA"})]})})]})}export{J as default};
